configuration:
  arguments:
    todoId: "1"
    myVar: "world"
flows:
  default:
    - script: js
    body: |
      var slack = tasks.get("slack");
      slack.call(execution, "C01CTRVL7J9", "Hi there!");
    - task: http
      in:
        url: "https://jsonplaceholder.typicode.com/todos/${todoId}"
        response: json
        out: myTodo

    - if: "${myTodo.content.completed}"
      then:
        - log: "All done!"
      else:
        - log: "You got a todo item: ${myTodo.content.title} MADAF"
  onPush:
    - log: "${event.sender} pushed ${event.commitId} to ${event.payload.repository.full_name} :·:·:·"
 
triggers:
- github:
    useInitiator: true
    entryPoint: onPush
    conditions:
      type: push